"use strict";window.onload=function(){var t,o=document.createElement("div");function n(e){document.getElementById("exif_question").checked&&EXIF.getData(e,function(){t=Boolean(EXIF.getTag(this,"Make"))?"Камера "+EXIF.getTag(this,"Make")+" "+EXIF.getTag(this,"Model")+", дата и время "+EXIF.getTag(this,"DateTime")+", ISO "+EXIF.getTag(this,"ISOSpeedRatings")+", выдержка 1/"+Math.round(1/EXIF.getTag(this,"ExposureTime"))+", диафрагма "+EXIF.getTag(this,"FNumber"):"нет данных",o.innerHTML=t,m.append(o)})}o.classList.add("fs_exif_info");var e=document.querySelectorAll(".theme_selector__btn"),r=document.querySelectorAll(".bg_color_selector__btn"),s=document.querySelector("body"),c=[{color1:"#f6da73",color2:"#3e5336",color3:"#e55b7e",font:"theme1_font",baseFontSize:"16"},{color1:"#e4eaea",color2:"#141a13",color3:"#ae621f",font:"theme2_font",baseFontSize:"16"},{color1:"#f4f6ec",color2:"#2d0c03",color3:"#f8b786",font:"theme3_font",baseFontSize:"16"}];e.forEach(function(e,t){e.style.setProperty("color",c[t].color1),e.style.setProperty("background-color",c[t].color2),e.style.setProperty("border-color",c[t].color3),e.style.setProperty("font-family",c[t].font),e.style.setProperty("font-size",c[t].baseFontSize-1+"px"),e.addEventListener("click",function(){var e;e=t,s.style.setProperty("--color",c[e].color1),s.style.setProperty("--background_color",c[e].color2),s.style.setProperty("--decor_color",c[e].color3),s.style.setProperty("--font_family",c[e].font),s.style.setProperty("--base_font_size",c[e].baseFontSize+"px")})}),r.forEach(function(e,t){e.style.setProperty("background-color","hsl(0, 0%, "+(1+18*t)+"%)"),e.addEventListener("click",function(){var e;e=t,s.style.setProperty("--fs_bg_color",1+18*e+"%")})});var l,i,a,u,d,f=document.querySelectorAll("img"),m=document.createElement("div"),g=document.createElement("img");function v(e){s.append(m),s.classList.add("no_scroll"),g.setAttribute("src",e.target.src),l=e.target,m.append(g),n(g),window.addEventListener("keydown",w),g.addEventListener("dragstart",function(e){e.preventDefault()}),m.addEventListener("mousedown",k),m.addEventListener("wheel",p),g.addEventListener("touchstart",b),g.addEventListener("click",function(e){e.preventDefault()})}function p(e){e.preventDefault(),e.stopPropagation(),(e.ctrlKey?0<e.deltaY?E:L:0<e.deltaY?S:X)()}g.classList.add("fullscreen_img"),m.classList.add("fullscreen_back"),f.forEach(function(e,t){e.addEventListener("click",v)}),s.addEventListener("wheel",function(e){e.ctrlKey&&(e.preventDefault(),e.stopPropagation())});var y=1,_=.5,h=4;function E(){h<(y+=.1)&&(y=h),1<y&&m.classList.add("fullscreen_back_fs"),g.style.transform="scale("+y+")"}function L(){(y-=.1)<_&&(y=_),y<1&&m.classList.remove("fullscreen_back_fs"),g.style.transform="scale("+y+")"}function b(e){var t,o=0;function n(e,t){return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))}function r(e){e.preventDefault(),e.stopPropagation(),o&&(n(e.targetTouches[0],e.targetTouches[1])<t?L:E)()}e.preventDefault(),e.stopPropagation(),e.targetTouches[1]&&(o=1,t=n(e.targetTouches[0],e.targetTouches[1]),g.addEventListener("touchmove",r)),(d=new Event("mousedown")).clientX=e.targetTouches[0].clientX,m.dispatchEvent(d),g.addEventListener("touchend",function e(t){t.preventDefault();t.stopPropagation();console.log(t);d=new Event("mouseup");d.clientX=t.changedTouches[0].clientX;m.dispatchEvent(d);g.removeEventListener("touchend",e);g.removeEventListener("touchmove",r)})}function k(e){i=e.clientX,a=e.clientY,i>m.clientWidth||a>m.clientHeight||m.addEventListener("mouseup",function e(t){m.removeEventListener("mouseup",e);u=t.clientX;t.clientY;20<u-i?S():20<i-u?X():(i-u<20||u-i<20)&&T()})}function w(e){"Escape"==e.key?T():107==e.keyCode?E():109==e.keyCode?L():"ArrowLeft"==e.key||"ArrowUp"==e.key||"PageUp"==e.key?X():"ArrowRight"!=e.key&&"ArrowDown"!=e.key&&"PageDown"!=e.key||S()}function T(){P(),o.remove(),g.classList.remove("fullscreen_img_fs"),g.remove(),s.classList.remove("no_scroll"),m.removeEventListener("mousedown",k),m.remove(),window.removeEventListener("keydown",w),g.removeEventListener("touchstart",b)}function P(){y=1,g.style.transform="scale(1)",m.classList.remove("fullscreen_back_fs")}function S(){P(),l=l.nextElementSibling?l.nextElementSibling:f[0],g.classList.add("fullscreen_img-fade_to_right"),setTimeout(function(){g.classList.add("fullscreen_img-appear"),g.classList.remove("fullscreen_img-fade_to_right"),g.setAttribute("src",l.src)},300),setTimeout(function(){g.classList.remove("fullscreen_img-appear")},500),n(l)}function X(){P(),l=l.previousElementSibling?l.previousElementSibling:f[f.length-1],g.classList.add("fullscreen_img-fade_to_left"),setTimeout(function(){g.classList.add("fullscreen_img-appear"),g.classList.remove("fullscreen_img-fade_to_left"),g.setAttribute("src",l.src)},300),setTimeout(function(){g.classList.remove("fullscreen_img-appear")},500),n(l)}};