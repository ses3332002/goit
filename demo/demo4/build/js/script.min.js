"use strict";window.onload=function(){var t,n=document.createElement("div");function o(e){document.getElementById("exif_question").checked&&EXIF.getData(e,function(){t=Boolean(EXIF.getTag(this,"Make"))?"Камера "+EXIF.getTag(this,"Make")+" "+EXIF.getTag(this,"Model")+", дата и время "+EXIF.getTag(this,"DateTime")+", ISO "+EXIF.getTag(this,"ISOSpeedRatings")+", выдержка 1/"+Math.round(1/EXIF.getTag(this,"ExposureTime"))+", диафрагма "+EXIF.getTag(this,"FNumber"):"нет данных",n.innerHTML=t,m.append(n)})}n.classList.add("fs_exif_info");var e=document.querySelectorAll(".theme_selector__btn"),r=document.querySelectorAll(".bg_color_selector__btn"),s=document.querySelector("body"),c=[{color1:"#f6da73",color2:"#3e5336",color3:"#e55b7e",font:"theme1_font",baseFontSize:"16"},{color1:"#e4eaea",color2:"#141a13",color3:"#ae621f",font:"theme2_font",baseFontSize:"16"},{color1:"#f4f6ec",color2:"#2d0c03",color3:"#f8b786",font:"theme3_font",baseFontSize:"16"}];e.forEach(function(e,t){e.style.setProperty("color",c[t].color1),e.style.setProperty("background-color",c[t].color2),e.style.setProperty("border-color",c[t].color3),e.style.setProperty("font-family",c[t].font),e.style.setProperty("font-size",c[t].baseFontSize-1+"px"),e.addEventListener("click",function(){var e;e=t,s.style.setProperty("--color",c[e].color1),s.style.setProperty("--background_color",c[e].color2),s.style.setProperty("--decor_color",c[e].color3),s.style.setProperty("--font_family",c[e].font),s.style.setProperty("--base_font_size",c[e].baseFontSize+"px")})}),r.forEach(function(e,t){e.style.setProperty("background-color","hsl(0, 0%, "+(1+18*t)+"%)"),e.addEventListener("click",function(){var e;e=t,s.style.setProperty("--fs_bg_color",1+18*e+"%")})});var a,i,l,d,u,f=document.querySelectorAll("img"),m=document.createElement("div"),v=document.createElement("img");function p(e){s.append(m),s.classList.add("no_scroll"),v.setAttribute("src",e.target.src),a=e.target,m.append(v),o(a),window.addEventListener("keydown",T),v.addEventListener("dragstart",function(e){e.preventDefault()}),m.addEventListener("mousedown",k),m.addEventListener("wheel",g),v.addEventListener("touchstart",b),v.addEventListener("click",function(e){e.preventDefault()})}function g(e){e.preventDefault(),e.stopPropagation(),(e.ctrlKey?0<e.deltaY?y:L:0<e.deltaY?S:X)()}v.classList.add("fullscreen_img"),m.classList.add("fullscreen_back"),f.forEach(function(e,t){e.addEventListener("click",p)}),s.addEventListener("wheel",function(e){e.ctrlKey&&(e.preventDefault(),e.stopPropagation())});var _=1,h=.5,E=4;function y(){E<(_+=.1)&&(_=E),1<_&&m.classList.add("fullscreen_back_fs"),v.style.transform="scale("+_+")"}function L(){(_-=.1)<h&&(_=h),_<1&&m.classList.remove("fullscreen_back_fs"),v.style.transform="scale("+_+")"}function b(e){var t,n=0;function o(e,t){return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))}function r(e){e.preventDefault(),e.stopPropagation(),v.addEventListener("touchend",s),n&&(o(e.targetTouches[0],e.targetTouches[1])<t?L:y)()}function s(e){e.preventDefault(),e.stopPropagation(),(u=new Event("mouseup")).clientX=e.changedTouches[0].clientX,m.dispatchEvent(u),v.removeEventListener("touchend",s),v.removeEventListener("touchmove",r)}e.preventDefault(),e.stopPropagation(),e.targetTouches[1]?(n=1,t=o(e.targetTouches[0],e.targetTouches[1]),v.addEventListener("touchmove",r)):((u=new Event("mousedown")).clientX=e.targetTouches[0].clientX,m.dispatchEvent(u),v.addEventListener("touchend",s))}function k(e){i=e.clientX,l=e.clientY,i>m.clientWidth||l>m.clientHeight||m.addEventListener("mouseup",function e(t){m.removeEventListener("mouseup",e);d=t.clientX;t.clientY;20<d-i?S():20<i-d?X():(i-d<20||d-i<20)&&w()})}function T(e){"Escape"==e.key?w():107==e.keyCode?y():109==e.keyCode?L():"ArrowLeft"==e.key||"ArrowUp"==e.key||"PageUp"==e.key?X():"ArrowRight"!=e.key&&"ArrowDown"!=e.key&&"PageDown"!=e.key||S()}function w(){P(),n.remove(),v.classList.remove("fullscreen_img_fs"),v.remove(),s.classList.remove("no_scroll"),m.removeEventListener("mousedown",k),m.remove(),window.removeEventListener("keydown",T),v.removeEventListener("touchstart",b)}function P(){_=1,v.style.transform="scale(1)",m.classList.remove("fullscreen_back_fs")}function S(){P(),a=a.nextElementSibling?a.nextElementSibling:f[0],v.classList.add("fullscreen_img-fade_to_right"),setTimeout(function(){v.classList.add("fullscreen_img-appear"),v.classList.remove("fullscreen_img-fade_to_right"),v.setAttribute("src",a.src)},300),setTimeout(function(){v.classList.remove("fullscreen_img-appear")},500),o(a)}function X(){P(),a=a.previousElementSibling?a.previousElementSibling:f[f.length-1],v.classList.add("fullscreen_img-fade_to_left"),setTimeout(function(){v.classList.add("fullscreen_img-appear"),v.classList.remove("fullscreen_img-fade_to_left"),v.setAttribute("src",a.src)},300),setTimeout(function(){v.classList.remove("fullscreen_img-appear")},500),o(a)}var F=document.createElement("div"),D=document.createElement("div"),I=document.createElement("button");F.innerHTML="Особенности сайта:",F.classList.add("readme"),D.classList.add("readme__message"),I.innerHTML="Закрыть",I.classList.add("readme__button"),fetch("readme.html").then(function(e){return e.text()}).then(function(e){return D.innerHTML=e}).catch(console.error),s.append(F),F.append(D),F.append(I),I.addEventListener("click",function(){I.remove(),D.remove(),F.remove()})};