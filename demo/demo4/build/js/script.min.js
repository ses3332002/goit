"use strict";window.onload=function(){var t,n=document.createElement("div");function o(e){document.getElementById("question1").checked&&EXIF.getData(e,function(){t=Boolean(EXIF.getTag(this,"Make"))?"Камера "+EXIF.getTag(this,"Make")+" "+EXIF.getTag(this,"Model")+", дата и время "+EXIF.getTag(this,"DateTime")+", ISO "+EXIF.getTag(this,"ISOSpeedRatings")+", выдержка 1/"+Math.round(1/EXIF.getTag(this,"ExposureTime"))+", диафрагма "+EXIF.getTag(this,"FNumber"):"нет данных",n.innerHTML=t,f.append(n)})}n.classList.add("fs_exif_info");var e=document.querySelectorAll(".theme_selector__btn"),r=document.querySelectorAll(".bg_color_selector__btn"),s=document.querySelector("body"),c=[{color1:"#f6da73",color2:"#3e5336",color3:"#e55b7e",font:"theme1_font",baseFontSize:"16"},{color1:"#e4eaea",color2:"#141a13",color3:"#ae621f",font:"theme2_font",baseFontSize:"16"},{color1:"#f4f6ec",color2:"#2d0c03",color3:"#f8b786",font:"theme3_font",baseFontSize:"16"}];e.forEach(function(e,t){e.style.setProperty("color",c[t].color1),e.style.setProperty("background-color",c[t].color2),e.style.setProperty("border-color",c[t].color3),e.style.setProperty("font-family",c[t].font),e.style.setProperty("font-size",c[t].baseFontSize-1+"px"),e.addEventListener("click",function(){var e;e=t,s.style.setProperty("--color",c[e].color1),s.style.setProperty("--background_color",c[e].color2),s.style.setProperty("--decor_color",c[e].color3),s.style.setProperty("--font_family",c[e].font),s.style.setProperty("--base_font_size",c[e].baseFontSize+"px")})}),r.forEach(function(e,t){e.style.setProperty("background-color","hsl(0, 0%, "+(1+18*t)+"%)"),e.addEventListener("click",function(){var e;e=t,s.style.setProperty("--fs_bg_color",1+18*e+"%")})});var l,a,i,d,u=document.querySelectorAll("img"),f=document.createElement("div"),m=document.createElement("img");function v(e){s.append(f),s.classList.add("no_scroll"),m.setAttribute("src",e.target.src),l=e.target,f.append(m),o(l),window.addEventListener("keydown",h),m.addEventListener("dragstart",function(e){e.preventDefault()}),m.addEventListener("mousedown",L),m.addEventListener("touchstart",E),f.addEventListener("wheel",p),m.addEventListener("click",function(e){e.preventDefault()})}function p(e){e.preventDefault(),e.stopPropagation(),(e.ctrlKey?0<e.deltaY?function(){(g+=.1)>y&&(g=y);1<g&&f.classList.add("fullscreen_back_fs");m.style.transform="scale("+g+")"}:function(){(g-=.1)<_&&(g=_);g<1&&f.classList.remove("fullscreen_back_fs");m.style.transform="scale("+g+")"}:0<e.deltaY?w:P)()}m.classList.add("fullscreen_img"),f.classList.add("fullscreen_back"),u.forEach(function(e,t){e.addEventListener("click",v)}),s.addEventListener("wheel",function(e){e.ctrlKey&&(e.preventDefault(),e.stopPropagation())});var g=1,_=.5,y=4;function E(e){e.preventDefault(),e.stopPropagation(),(d=new Event("mousedown")).clientX=e.targetTouches[0].clientX,m.dispatchEvent(d),m.addEventListener("touchend",function e(t){t.preventDefault();t.stopPropagation();d=new Event("mouseup");d.clientX=t.changedTouches[0].clientX;m.dispatchEvent(d);m.removeEventListener("touchend",e)})}function L(e){a=e.clientX,e.clientY,m.addEventListener("mouseup",function e(t){m.removeEventListener("mouseup",e);i=t.clientX;t.clientY;20<i-a?w():20<a-i?P():(a-i<20||i-a<20)&&b()})}function h(e){"Escape"==e.key?b():"ArrowLeft"==e.key||"ArrowUp"==e.key||"PageUp"==e.key?P():"ArrowRight"!=e.key&&"ArrowDown"!=e.key&&"PageDown"!=e.key||w()}function b(){n.remove(),m.classList.remove("fullscreen_img_fs"),m.remove(),s.classList.remove("no_scroll"),f.remove(),m.removeEventListener("mousedown",L),window.removeEventListener("keydown",h),m.removeEventListener("touchstart",E)}function k(){g=1,m.style.transform="scale(1)",f.classList.remove("fullscreen_back_fs")}function w(){k(),l=l.nextElementSibling?l.nextElementSibling:u[0],m.classList.add("fullscreen_img-fade_to_right"),setTimeout(function(){m.classList.remove("fullscreen_img-fade_to_right"),m.setAttribute("src",l.src)},300),o(l)}function P(){k(),l=l.previousElementSibling?l.previousElementSibling:u[u.length-1],m.classList.add("fullscreen_img-fade_to_left"),setTimeout(function(){m.classList.remove("fullscreen_img-fade_to_left"),m.setAttribute("src",l.src)},300),o(l)}var T=document.createElement("div"),S=document.createElement("div"),F=document.createElement("button");T.innerHTML="Особенности сайта:",T.classList.add("readme"),S.classList.add("readme__message"),F.innerHTML="Закрыть",F.classList.add("readme__button"),fetch("readme.html").then(function(e){return e.text()}).then(function(e){return S.innerHTML=e}).catch(console.error),s.append(T),T.append(S),T.append(F),F.addEventListener("click",function(){F.remove(),S.remove(),T.remove()})};